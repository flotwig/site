---
layout: page-post
---

<article>
	<a href="{{ page.url }}"><h2>{{ page.title }}</h2></a>
	<time>{{ page.date | date: "%B %d, %Y" }}</time>
	<div class="details">
		{{ content }}
	</div>
	{% assign printedRelated = false %}
	{% assign printed = "" %}
	{% for post in site.posts %}
		{% for tag in page.tags %}
			{% if post.tags contains tag and post.url != page.url %}
				{% unless printed contains post.url %}
					{% if printedRelated != true %}
						{% assign printedRelated = true %}
						<hr/>
						<div class="related-posts">
							<h3>Related Posts on zach.bloomqu.ist</h3>
							<ul>
					{% endif %}
					<li><a href="{{ post.url }}">{{ post.title }}</a> ({{ post.date | date: "%Y" }})</li>
					{% assign printed = printed | append: " " | append: post.url %}
				{% endunless %}
			{% endif %}
		{% endfor %}
	{% endfor %}
	{% if printedRelated %}
	</ul>
	</div>
	{% endif %}
	<hr/>
	<div class="comments">
		<h3>Comments</h3>
		<div id="load-comments">
			This blog uses Disqus for comments. To protect the privacy of visitors, comments are only loaded if you click the button below.
			<noscript>Please enable JavaScript to view discussion.</noscript>
		</div>
		<div id="disqus_thread"></div>
			<script>
			var disqus_config = function () {
				this.page.url = '{{ site.url }}{{ page.url }}';
			};

			var loaded = false;
			
			var loadDisqus = function() {
				var d = document, s = d.createElement('script');
				s.src = 'https://charyus.disqus.com/embed.js';
				s.setAttribute('data-timestamp', +new Date());
				(d.head || d.body).appendChild(s);
			};
			
			var loadCommentsDiv = document.getElementById('load-comments');
			var loadCommentsBtn = document.createElement('button');

			loadCommentsBtn.innerHTML = 'Load comments from Disqus';

			loadCommentsBtn.addEventListener('click', () => {
				if (loaded) {
					return
				}

				loaded = true;
				loadCommentsDiv.style.display = 'none';
				loadDisqus();
			});
			
			loadCommentsDiv.appendChild(loadCommentsBtn);
		</script>
	</div>
</article>
